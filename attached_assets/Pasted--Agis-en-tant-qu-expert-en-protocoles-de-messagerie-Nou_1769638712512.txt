"Agis en tant qu'expert en protocoles de messagerie. Nous abandonnons Puppeteer/whatsapp-web.js pour pivoter vers la librairie @whiskeysockets/baileys. C'est une priorit√© absolue.
1. MUSCLAGE DE L'IDENTIT√â TECHNIQUE (Anti-Detection) :
Pour √©viter l'erreur 'Impossible de connecter de nouveaux appareils', configure Baileys pour qu'il paraisse 100% humain aux yeux des serveurs Meta :
Browser Metadata : Configure le socket pour qu'il s'identifie comme un navigateur Chrome sur macOS. Utilise exactement ceci : browser: ['Mac OS', 'Chrome', '121.0.0.0'].
Simulation de frappe (Presence Update) : Avant chaque r√©ponse envoy√©e par le bot, active l'√©tat 'en train d'√©crire' (composing) pendant un d√©lai al√©atoire entre 2 et 5 secondes. Cela simule un humain qui tape au clavier.
D√©lais Al√©atoires : N'envoie jamais de r√©ponse instantan√©e. Ajoute un d√©lai de 'r√©flexion' al√©atoire (entre 1 et 3 secondes) apr√®s la r√©ception du message pour casser le rythme robotique.
Sync History : D√©sactive la synchronisation compl√®te de l'historique lors de la connexion pour rester l√©ger et discret.
2. TRANSITION TECHNIQUE :
Supprime whatsapp-web.js, Chromium et Puppeteer du projet.
Installe @whiskeysockets/baileys, pino (pour les logs) et qrcode.
Impl√©mente la connexion avec useMultiFileAuthState dans le dossier ./auth_info_baileys pour que la session soit persistante.
3. R√â-INJECTION DE LA LOGIQUE M√âTIER (Furtif & Brut) :
R√©impl√©mente toutes nos r√®gles dans le nouveau whatsapp.ts :
Ton : 1√®re personne ('je'), court, sec, sans aucun emoji.
Style SMS : Abr√©viations et fautes (cc, darriv√©, tenverai, a tte).
Censure : Fonction censorText obligatoire (An4l, S@ns capote, Fell4tion, Finitio.n vizage, Sp3rme).
Dual Pricing : Escort disponible uniquement pour 60 min ou plus.
S√©curit√© Adresse : 2 √©tapes (Google Maps √† la confirmation, Secret Details √† T-15).
Statuts : ACTIVE (‚ö°), AWAY (üåô), GHOST (üëª).
No-Show : Logique '2 signalements = blocage automatique' li√©e au bouton de l'agenda.
Safety Blacklist : Silence radio pour les profils dangereux (2 signalements danger).
Assure-toi que le QR Code est toujours envoy√© au frontend sous forme de base64 pour affichage imm√©diat."